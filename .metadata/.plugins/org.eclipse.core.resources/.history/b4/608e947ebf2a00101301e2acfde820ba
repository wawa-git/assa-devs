package com.assaassociates.syraway.exts.mbeans;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import org.springframework.context.ApplicationContext;
import org.springframework.web.jsf.FacesContextUtils;
import com.assaasoociates.syraway.controller.IPageController;
import com.assaassociates.syraway.model.Page;

@ManagedBean(name="menu")
@SessionScoped
public class MenuServiceImpl implements IMenuService {

private static final long serialVersionUID = 6726658729223350876L;
	
	private IPageController oPageController;
	private Page value;
	private List<Page> pageList;
	public MenuServiceImpl(){
		super(); 
		ApplicationContext appContext = FacesContextUtils.getWebApplicationContext(FacesContext.getCurrentInstance());
		this.oPageController = appContext.getBean("pageController", IPageController.class);
		this.value = new Page();
		this.pageList = new ArrayList<Page>();
	}

	public IPageController getPageController() {
		return oPageController;
	}

	public void setPageController(IPageController pPageController) {
		this.oPageController = pPageController;
	}

	public Page getValue() {
		return value;
	}

	public void setValue(Page pValue) {
		this.value = pValue;
	}

	public List<Page> getPageList() {
		return pageList;
	}

	public void setPageList(List<Page> pPageList) {
		this.pageList = pPageList;
	}

	@Override
	public List<Page> getAllMenus() {
		List<Page> result = new ArrayList<Page>(); 
		if(oPageController != null){
			result =  oPageController.getAllPages();
			Collections.sort(result);
		}
		return result;
	}
	
	@Override
	public List<Page> getAllVisibleMenus(){
		List<Page> result = new ArrayList<Page>(); 
		if(oPageController != null){
			result = oPageController.getAllVisibleMenus();
			Collections.sort(result);
		}
		return result;
	}
}
